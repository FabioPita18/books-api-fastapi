# =============================================================================
# Books API - Environment Configuration Template (Phase 1)
# =============================================================================
#
# This file is SAFE to commit to Git - it contains NO real secrets.
# It serves as documentation for required environment variables.
#
# =============================================================================
# SETUP INSTRUCTIONS (Step by Step)
# =============================================================================
#
# 1. Copy this file to create your local .env:
#    cp .env.example .env
#
# 2. Generate your SECRET_KEY:
#    openssl rand -hex 32
#    Copy the output and paste it as your SECRET_KEY value
#
# 3. Generate your POSTGRES_PASSWORD:
#    openssl rand -base64 24
#    Copy the output and paste it as your POSTGRES_PASSWORD value
#
# 4. Update DATABASE_URL with your generated password
#
# 5. Start the services:
#    docker-compose up -d
#
# 6. Run database migrations:
#    docker-compose exec api alembic upgrade head
#
# 7. Access the API:
#    http://localhost:8001/docs
#
# =============================================================================

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
# APP_NAME: Displayed in OpenAPI documentation and logs
APP_NAME=Books API

# API_VERSION: Used for URL versioning (e.g., /api/v1/)
API_VERSION=v1

# ENVIRONMENT: development, staging, or production
ENVIRONMENT=development

# DEBUG: Enable debug mode
# - True: Detailed errors, auto-reload (DEVELOPMENT ONLY!)
# - False: Production mode, minimal error exposure
# WARNING: NEVER set to True in production!
DEBUG=True

# LOG_LEVEL: Minimum logging level
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# =============================================================================
# SECURITY - SECRET KEY
# =============================================================================
# Used for cryptographic operations (JWT signing, etc.)
#
# REQUIRED: Generate a unique secret for your deployment!
#
# Generate with: openssl rand -hex 32
# Or Python:     python -c "import secrets; print(secrets.token_hex(32))"
#
SECRET_KEY=generate-with-openssl-rand-hex-32

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================
# Security: We use custom credentials and ports, NOT defaults!
#
# Why?
# - Default 'postgres' user is a known attack target
# - Default port 5432 is scanned by automated security tools
# - Custom values add a layer of security

# Database username (don't use 'postgres'!)
POSTGRES_USER=books_admin

# Database password
# REQUIRED: Generate a strong password!
#
# Generate with: openssl rand -base64 24
#
POSTGRES_PASSWORD=generate-with-openssl-rand-base64-24

# Database name
POSTGRES_DB=books_production

# Custom port (not default 5432)
POSTGRES_PORT=5433

# Full connection URL (update password after generating)
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://books_admin:YOUR_GENERATED_PASSWORD@localhost:5433/books_production

# Connection pool settings
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10

# =============================================================================
# API CONFIGURATION
# =============================================================================
# Custom port (not default 8000)
API_PORT=8001

# Host binding
HOST=0.0.0.0

# =============================================================================
# CORS (Cross-Origin Resource Sharing)
# =============================================================================
# Comma-separated list of allowed origins
# Development: localhost ports for your frontend
# Production: your actual domain(s)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# API Key header name
API_KEY_HEADER=X-API-Key

# =============================================================================
# API KEY AUTHENTICATION
# =============================================================================
# Enable/disable API key requirement for write operations
API_KEY_ENABLED=True

# Admin API key for full access
# REQUIRED: Generate a secure key!
#
# Generate with: openssl rand -hex 32
# Then prepend "bk_" to make it: bk_<your-generated-key>
#
# Example: bk_a1b2c3d4e5f6...
ADMIN_API_KEY=your-admin-api-key-here

# =============================================================================
# JWT AUTHENTICATION CONFIGURATION
# =============================================================================
# JWT tokens are used for user authentication (Phase 3)

# Algorithm for signing tokens (HS256 is standard)
JWT_ALGORITHM=HS256

# Access token lifetime (short-lived for security)
# Default: 15 minutes
ACCESS_TOKEN_EXPIRE_MINUTES=15

# Refresh token lifetime (longer-lived, stored in httpOnly cookie)
# Default: 7 days
REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# OAUTH CONFIGURATION (Social Login)
# =============================================================================
# To enable social login, you need to register OAuth apps:
#
# GOOGLE:
# 1. Go to https://console.cloud.google.com/
# 2. Create a new project or select existing
# 3. Go to APIs & Services > Credentials
# 4. Create OAuth 2.0 Client ID (Web application)
# 5. Add authorized redirect URI: http://localhost:8001/api/v1/auth/google/callback
# 6. Copy Client ID and Client Secret below
#
# GITHUB:
# 1. Go to https://github.com/settings/developers
# 2. Click "New OAuth App"
# 3. Set Homepage URL: http://localhost:8001
# 4. Set Authorization callback URL: http://localhost:8001/api/v1/auth/github/callback
# 5. Copy Client ID and Client Secret below

# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:8001/api/v1/auth/google/callback

# GitHub OAuth
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_REDIRECT_URI=http://localhost:8001/api/v1/auth/github/callback

# Frontend URL (where to redirect after OAuth)
FRONTEND_URL=http://localhost:3000

# =============================================================================
# REDIS & CACHING CONFIGURATION
# =============================================================================
# Redis is used for response caching and rate limiting storage

# Redis connection URL
REDIS_URL=redis://localhost:6379/0

# Redis port (for Docker Compose)
REDIS_PORT=6379

# Cache TTL settings (in seconds)
CACHE_TTL=300
CACHE_TTL_BOOKS=300
CACHE_TTL_SEARCH=120
CACHE_TTL_LISTS=600

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
# Protects the API from abuse and ensures fair usage

# Enable/disable rate limiting
RATE_LIMIT_ENABLED=True

# Rate limits (format: "requests/period" - e.g., "100/minute", "1000/hour")
RATE_LIMIT_DEFAULT=100/minute
RATE_LIMIT_WRITE=30/minute
RATE_LIMIT_SEARCH=60/minute

# =============================================================================
# SECURITY CHECKLIST
# =============================================================================
# Before deploying to production, ensure:
#
# [ ] SECRET_KEY is randomly generated and unique
# [ ] POSTGRES_PASSWORD is randomly generated and strong
# [ ] DEBUG is set to False
# [ ] ALLOWED_ORIGINS contains only your actual domains
# [ ] .env file is NOT committed to Git
# [ ] Ports are configured for your environment
# [ ] Database backups are configured
#
# See SECURITY.md for detailed security guidelines.
# =============================================================================
